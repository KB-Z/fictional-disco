(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{184:function(e,t,a){e.exports=a(331)},330:function(e,t,a){},331:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(15),c=a.n(r),i=a(34),s=a(37),l=a(8),u=a(7),m=a(11),p=a(10),h=a(12),d=a(3),g=a(384),f=a(9),E=a(29),b=a(122),v=a(367),y=a(368),O=a(95),k=a(358),w=a(22),j=a.n(w),C=a(362),x=a(176),A=a(365),P=a(366),S=a(363),N=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={authenticated:null,user:null,menuAnchorEl:null},a.login=function(){return a.props.auth.login()},a.logout=function(){a.handleMenuClose(),a.props.auth.logout()},a.handleMenuOpen=function(e){return a.setState({menuAnchorEl:e.currentTarget})},a.handleMenuClose=function(){return a.setState({menuAnchorEl:null})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(){this.checkAuthentication()}},{key:"componentDidMount",value:function(){this.checkAuthentication()}},{key:"checkAuthentication",value:function(){var e,t;return j.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,j.a.awrap(this.props.auth.isAuthenticated());case 2:if((e=a.sent)===this.state.authenticated){a.next=8;break}return a.next=6,j.a.awrap(this.props.auth.getUser());case 6:t=a.sent,this.setState({authenticated:e,user:t});case 8:case"end":return a.stop()}}),null,this)}},{key:"render",value:function(){var e=this.state,t=e.authenticated,a=e.user,n=e.menuAnchorEl;if(null===t)return null;if(!t)return o.a.createElement(k.a,{color:"inherit",onClick:this.login},"Login");var r={vertical:"top",horizontal:"right"};return o.a.createElement("div",null,o.a.createElement(C.a,{onClick:this.handleMenuOpen,color:"inherit"},o.a.createElement(S.a,null)),o.a.createElement(x.a,{anchorEl:n,anchorOrigin:r,transformOrigin:r,open:!!n,onClose:this.handleMenuClose},o.a.createElement(A.a,{onClick:this.logout},o.a.createElement(P.a,{primary:"Logout",secondary:a&&a.name}))))}}]),t}(n.Component),R=Object(s.withAuth)(N),I=Object(f.a)({flex:{flex:1}})((function(e){var t=e.setUserLocation,a=e.classes;return o.a.createElement(v.a,{position:"absolute"},o.a.createElement(y.a,null,o.a.createElement(O.a,{variant:"h6",color:"inherit"},"Fanatik Fuel"),o.a.createElement(k.a,{color:"inherit",onClick:t},"My Location"),o.a.createElement(k.a,{color:"inherit",component:i.b,to:"/"},"Home"),o.a.createElement(k.a,{color:"inherit",component:i.b,to:"/posts"},"Posts Manager"),o.a.createElement("div",{className:a.flex}),o.a.createElement(R,null)))})),_=a(123),z=a(364),L=a(332),M=a(375),T=a(377),B=a(376),U=a(378),D=a(172),J=a.n(D),V=a(120),H=a(48),F=a(381),G=a(369),K=a(370),W=a(379),Y=a(371),X=a(94),q=Object(H.a)(E.withRouter,Object(f.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},modalCard:{width:"90%",maxWidth:500},modalCardContent:{display:"flex",flexDirection:"column"},marginTop:{marginTop:e.spacing(2)}}})))((function(e){var t=e.classes,a=e.post,n=e.onSave,r=e.history;return o.a.createElement(X.b,{initialValues:a,onSubmit:n},(function(e){var a=e.handleSubmit;return o.a.createElement(F.a,{className:t.modal,onClose:function(){return r.goBack()},open:!0},o.a.createElement(G.a,{className:t.modalCard},o.a.createElement("form",{onSubmit:a},o.a.createElement(K.a,{className:t.modalCardContent},o.a.createElement(X.a,{name:"title"},(function(e){var t=e.input;return o.a.createElement(W.a,Object.assign({label:"Title",autoFocus:!0},t))})),o.a.createElement(X.a,{name:"body"},(function(e){var a=e.input;return o.a.createElement(W.a,Object.assign({className:t.marginTop,label:"Body",multiline:!0,rows:4},a))}))),o.a.createElement(Y.a,null,o.a.createElement(k.a,{size:"small",color:"primary",type:"submit"},"Save"),o.a.createElement(k.a,{size:"small",onClick:function(){return r.goBack()}},"Cancel")))))}))})),$=a(383),Q=a(372),Z=a(373),ee=a(374),te=a(175),ae=a.n(te),ne=Object(H.a)(Object(H.b)("id","setId",ae.a),Object(f.a)((function(e){return{snackbarContent:{backgroundColor:e.palette.error.dark},message:{display:"flex",alignItems:"center"},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)}}})))((function(e){var t=e.id,a=e.message,n=e.onClose,r=e.classes;return o.a.createElement($.a,{open:!0,autoHideDuration:6e3,onClose:n},o.a.createElement(Q.a,{className:"".concat(r.margin," ").concat(r.snackbarContent),"aria-describedby":t,message:o.a.createElement("span",{id:t,className:r.message},o.a.createElement(Z.a,{className:"".concat(r.icon," ").concat(r.iconVariant)}),a),action:[o.a.createElement(C.a,{key:"close","aria-label":"Close",color:"inherit",onClick:n},o.a.createElement(ee.a,{className:r.icon}))]}))})),oe=Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_MAPBOX_API_KEY:"pk.eyJ1IjoiemRvbm5lcjE3OSIsImEiOiJjazRzcWVob3YzczBwM2xsYjRrdDhpcndiIn0.G6H1BMGdE9vOs7eK7rmrgg",REACT_APP_OKTA_ORG_URL:"https://dev-732359.okta.com",REACT_APP_OKTA_CLIENT_ID:"0oa2dco59cSnOEHvP357"}).REACT_APP_API||"http://localhost:3001",re=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0,posts:[],error:null},a.savePost=function(e){return j.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.id){t.next=5;break}return t.next=3,j.a.awrap(a.fetch("put","/posts/".concat(e.id),e));case 3:t.next=7;break;case 5:return t.next=7,j.a.awrap(a.fetch("post","/posts",e));case 7:a.props.history.goBack(),a.getPosts();case 9:case"end":return t.stop()}}))},a.renderPostEditor=function(e){var t=e.match.params.id;if(a.state.loading)return null;var n=Object(V.find)(a.state.posts,{id:Number(t)});return n||"new"===t?o.a.createElement(q,{post:n,onSave:a.savePost}):o.a.createElement(E.Redirect,{to:"/posts"})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.getPosts()}},{key:"fetch",value:function(e){function t(t,a,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t,a){var n;return j.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.t0=j.a,o.t1=fetch,o.t2="".concat(oe).concat(t),o.t3=e,o.t4=a&&JSON.stringify(a),o.t5="Bearer ",o.next=9,j.a.awrap(this.props.auth.getAccessToken());case 9:return o.t6=o.sent,o.t7=o.t5.concat.call(o.t5,o.t6),o.t8={"content-type":"application/json",accept:"application/json",authorization:o.t7},o.t9={method:o.t3,body:o.t4,headers:o.t8},o.t10=(0,o.t1)(o.t2,o.t9),o.next=16,o.t0.awrap.call(o.t0,o.t10);case 16:return n=o.sent,o.next=19,j.a.awrap(n.json());case 19:return o.abrupt("return",o.sent);case 22:o.prev=22,o.t11=o.catch(0),console.error(o.t11),this.setState({error:o.t11});case 26:case"end":return o.stop()}}),null,this,[[0,22]])}))},{key:"getPosts",value:function(){return j.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,j.a.awrap(this.fetch("get","/posts"));case 3:if(e.t1=e.sent,e.t1){e.next=6;break}e.t1=[];case 6:e.t2=e.t1,e.t3={loading:!1,posts:e.t2},e.t0.setState.call(e.t0,e.t3);case 9:case"end":return e.stop()}}),null,this)}},{key:"deletePost",value:function(e){return j.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm('Are you sure you want to delete "'.concat(e.title,'"'))){t.next=4;break}return t.next=3,j.a.awrap(this.fetch("delete","/posts/".concat(e.id)));case 3:this.getPosts();case 4:case"end":return t.stop()}}),null,this)}},{key:"render",value:function(){var e=this,t=this.props.classes;return o.a.createElement(n.Fragment,null,o.a.createElement(O.a,{variant:"h4"},"Posts Manager"),this.state.posts.length>0?o.a.createElement(_.a,{elevation:1,className:t.posts},o.a.createElement(z.a,null,Object(V.orderBy)(this.state.posts,["updatedAt","title"],["desc","asc"]).map((function(t){return o.a.createElement(L.a,{key:t.id,button:!0,component:i.b,to:"/posts/".concat(t.id)},o.a.createElement(P.a,{primary:t.title,secondary:t.updatedAt&&"Updated ".concat(J()(t.updatedAt).fromNow())}),o.a.createElement(M.a,null,o.a.createElement(C.a,{onClick:function(){return e.deletePost(t)},color:"inherit"},o.a.createElement(B.a,null))))})))):!this.state.loading&&o.a.createElement(O.a,{variant:"subtitle1"},"No posts to display"),o.a.createElement(T.a,{color:"secondary","aria-label":"add",className:t.fab,component:i.b,to:"/posts/new"},o.a.createElement(U.a,null)),o.a.createElement(E.Route,{exact:!0,path:"/posts/:id",render:this.renderPostEditor}),this.state.error&&o.a.createElement(ne,{onClose:function(){return e.setState({error:null})},message:this.state.error.message}))}}]),t}(n.Component),ce=Object(H.a)(s.withAuth,E.withRouter,Object(f.a)((function(e){return{posts:{marginTop:e.spacing(2)},fab:Object(d.a)({position:"absolute",bottom:e.spacing(3),right:e.spacing(3)},e.breakpoints.down("xs"),{bottom:e.spacing(2),right:e.spacing(2)})}})))(re),ie=(a(330),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).setUserLocation=function(){navigator.geolocation.getCurrentPosition((function(e){var t={lat:e.coords.latitude,long:e.coords.longitude},n={height:"98vh",width:"100vw",latitude:e.coords.latitude,longitude:e.coords.longitude,zoom:16};a.setState({viewport:n,userLocation:t})}))},a.state={viewport:{width:"100vw",height:"98vh",latitude:33.748795,longitude:-84.384904,zoom:10},userLocation:{}},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(n.Fragment,null,o.a.createElement(g.a,null),o.a.createElement(I,{setUserLocation:this.setUserLocation}),o.a.createElement("main",null,o.a.createElement("div",{className:"map"},o.a.createElement(b.b,Object.assign({},this.state.viewport,{mapStyle:"mapbox://styles/zdonner179/ck4sq2ix3027r1cl58pru9005",mapboxApiAccessToken:"pk.eyJ1IjoiemRvbm5lcjE3OSIsImEiOiJjazRzcWVob3YzczBwM2xsYjRrdDhpcndiIn0.G6H1BMGdE9vOs7eK7rmrgg",onViewportChange:function(t){return e.setState({viewport:t})}}),0!==Object.keys(this.state.userLocation).length?o.a.createElement(b.a,{latitude:this.state.userLocation.lat,longitude:this.state.userLocation.long},o.a.createElement("img",{className:"location-icon",src:"ICON-MEET-CARBON-3X.png"})):o.a.createElement("div",null,"Empty"))),o.a.createElement(s.SecureRoute,{path:"/posts",component:ce}),o.a.createElement(E.Route,{path:"/implicit/callback",component:s.ImplicitCallback})))}}]),t}(n.Component)),se=Object(f.a)((function(e){return{main:Object(d.a)({padding:e.spacing(3)},e.breakpoints.down("xs"),{padding:e.spacing(2)})}}))(ie);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var le={issuer:"".concat("https://dev-732359.okta.com","/oauth2/default"),redirect_uri:"".concat(window.location.origin,"/implicit/callback"),client_id:"0oa2dco59cSnOEHvP357"};c.a.render(o.a.createElement(i.a,null,o.a.createElement(s.Security,le,o.a.createElement(se,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[184,1,2]]]);
//# sourceMappingURL=main.7b721e4f.chunk.js.map